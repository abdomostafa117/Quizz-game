<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
    // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²ÙˆÙ… Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ÙÙ‚Ø·
    if (/Mobi|Android/i.test(navigator.userAgent)) {
      const meta = document.querySelector('meta[name="viewport"]');
      if (meta) {
        meta.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
      }
    }
  </script>
  <title>Quiz Game</title>
  <link rel="stylesheet" href="css/quizz.css">
  <style>
    .progress-container {
      width: 100%;
      background-color: #ddd;
      border-radius: 10px;
      margin-bottom: 12px;
      height: 18px;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      width: 0%;
      background-color: #2b97d6;
      border-radius: 10px;
      transition: width 0.35s ease;
    }
    #questionCount {
      text-align: center;
      margin-bottom: 8px;
      font-weight: bold;
    }
    #restartBtn {
      background-color: #1375ad;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 18px;
      border-radius: 10px;
      cursor: pointer;
      margin-top: 20px;
    }
    #restartBtn:hover { background-color: #3e8e41; }
    #options button {
      display: block;
      width: 100%;
      margin: 8px 0;
      padding: 10px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }
    .player-row { display:flex; gap:10px; align-items:center; margin:6px 0; }
    .rank { width:24px; }
    .highlight { font-weight:bold; }
  </style>
</head>
<body>
  <div class="menu-wrapper">
    <div class="menu-icon" onclick="toggleMenu()">
      <div></div><div></div><div></div>
    </div>
    <div class="dropdown-menu" id="dropdownMenu">
      <a href="https://abdomostafa117.github.io/protofolio/"><button>Who I Am</button></a>
      <a href="leave.html"><button>Contact Me</button></a>
    </div>
  </div>

  <div class="container">
    <a href="https://abdomostafa117.github.io/protofolio/"><img src="img/am1r.png" class="logo" alt="Logo"></a>
    <h1>Ø¨ØªØ§Ø¹Ùƒ IQ Ø§Ù†Øª Ùˆ</h1>

    <div id="startScreen">
      <input type="text" id="playerName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§ ÙˆØ¨Ù„Ø§Ø´ Ø§Ø³Ø§Ù…ÙŠ ØºØ±ÙŠØ¨Ù‡">
      <br>
      <button id="startBtn">Ø§Ø¨Ø¯Ø£ </button>
      <div class="leaderboard">
        <h2>Leadboard ğŸ†</h2>
        <div id="leaderboardList"></div>
      </div>
    </div>

    <div id="quizScreen" style="display:none;">
      <div id="questionCount"></div>
      <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <div class="question-box">
        <h2 id="questionText"></h2>
        <div id="options"></div>
      </div>
    </div>

    <div id="resultScreen" style="display:none;">
      <h2 id="finalScore"></h2>
      <div id="commentBox" class="comment-box"></div>
      <div class="leaderboard">
        <h2>Leadboard ğŸ†</h2>
        <div id="leaderboardListResult"></div>
      </div>
      <button id="refreshBtn">Ø¥Ø¹Ø§Ø¯Ø©</button>
      <button id="nextGameBtn">Ø­Ø³Ù† Ø¯Ø±Ø¬ØªÙƒ</button>
<script>
document.getElementById("nextGameBtn").addEventListener("click", () => {
  window.location.href = "habal.html";
});
</script>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyApE6uStJgmNqJFi7K1AvkUWDxPVUhmVIQ",
      authDomain: "quizz-game-633ea.firebaseapp.com",
      projectId: "quizz-game-633ea",
      storageBucket: "quizz-game-633ea.firebasestorage.app",
      messagingSenderId: "595850731411",
      appId: "1:595850731411:web:14fd071e91d677b1491266",
      measurementId: "G-B2L0T21JWQ"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let playerName = "";
    let currentQuestion = 0;
    let score = 0;

    let allQuestions = [
      { q: "Ù„Ùˆ Ø¹Ø¯Ù‘ÙŠØª Ø§Ù„Ù…ØªØ³Ø§Ø¨Ù‚ Ø§Ù„ØªØ§Ù†ÙŠØŒ ØªØ¨Ù‚ÙŠ ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„ÙƒØ§Ù…ØŸ", options: ["Ø§Ù„Ø£ÙˆÙ„", "Ø§Ù„ØªØ§Ù†ÙŠ", "Ø§Ù„ØªØ§Ù„Øª"], answer: "Ø§Ù„ØªØ§Ù†ÙŠ" },
      { q: "Ù„Ùˆ Ø¹Ø¯ÙˆÙƒ Ø­Ø·Ù„Ùƒ Ø³Ù… Ù‚Ø§ØªÙ„ ÙÙˆØ±ÙŠ ÙÙŠ Ø§Ù„Ø·Ø¹Ø§Ù… ÙˆØ£ÙƒÙ„ØªÙ‡ØŒ Ù‡ØªØ¹Ù…Ù„ Ø¥ÙŠÙ‡ Ù…Ø¹Ø§Ù‡ Ø¨Ø¹Ø¯ Ø³Ø§Ø¹Ø©ØŸ", options: ["Ù‡ØªÙ†ØªÙ‚Ù… Ù…Ù†Ù‡", "Ù‡ØªØ¨Ù„Øº Ø§Ù„Ø´Ø±Ø·Ø©", "Ø£Ù†Ø§ Ù…Ø´ ØºØ¨ÙŠ"], answer: "Ø£Ù†Ø§ Ù…Ø´ ØºØ¨ÙŠ" },
      { q: "Ø¥Ø°Ø§ ØªÙ… ÙˆØ¶Ø¹ 100 Ù†Ø¹Ø¬Ø© Ø¨ÙƒØ± ÙÙŠ Ø¬Ø²ÙŠØ±Ø© Ù†Ø§Ø¦ÙŠØ© Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ù‡Ø§ ØºÙŠØ± Ø§Ù„Ø¹Ø´Ø¨ ÙˆØ§Ù„Ù…Ø§Ø¡ØŒ ÙÙƒÙ… Ø³ÙŠØµØ¨Ø­ Ù„Ø¯ÙŠÙ‡Ù† Ù…Ù† Ø§Ù„Ø®Ø±ÙØ§Ù† Ø¨Ø¹Ø¯ Ø³Ù†ØªÙŠÙ†ØŸ", options: ["200 Ø®Ø±ÙˆÙ", "150 Ø®Ø±ÙˆÙ", "100 Ø®Ø±ÙˆÙ", "Ù„Ø³Øª ØºØ¨ÙŠÙ‹Ø§"], answer: "Ù„Ø³Øª ØºØ¨ÙŠÙ‹Ø§" },
      { q: "Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ø±Ø¬Ø§Ù„ Ø§Ù„ØµÙ… Ø°Ù‡Ø¨ÙˆØ§ ÙÙŠ Ø±Ø­Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„ØºØ§Ø¨Ø© Ù„ÙŠØ³ØªØ±Ø­ÙˆØ§ ØªØ­Øª Ø´Ø¬Ø±Ø© ÙƒØ¨ÙŠØ±Ø©ØŒ ÙØ¥Ø°Ø§ Ø²Ø£Ø± Ø£Ø³Ø¯ Ø¨Ù‚ÙˆØ© ÙˆØ±Ø§Ø¡ Ø§Ù„ØªÙ„ Ø§Ù„Ù…Ø¬Ø§ÙˆØ±ØŒ Ù…Ø§Ø°Ø§ Ø³ÙŠÙØ¹Ù„ÙˆÙ†ØŸ", options: ["ÙŠÙ‡Ø±Ø¨ÙˆØ§ Ù…Ù† Ø§Ù„ØºØ§Ø¨Ø©", "ÙŠØªØ³Ù„Ù‚ÙˆØ§ Ø§Ù„Ø´Ø¬Ø±Ø©", "ÙŠØ¸Ù„ÙˆØ§ Ù…ÙƒØ§Ù†Ù‡Ù…", "Ø£Ù†Ø§ Ù…Ø´ ØºØ¨ÙŠ"], answer: "ÙŠØ¸Ù„ÙˆØ§ Ù…ÙƒØ§Ù†Ù‡Ù…" },
      { q: "Ù…Ø²Ø±Ø¹Ø© ÙÙŠÙ‡Ø§ 14 Ø®Ø±ÙˆÙ ÙƒÙ„Ù‡Ù… Ù…Ø§ØªÙˆØ§ Ø¥Ù„Ø§ 9ØŒ Ø§ØªØ¨Ù‚Ù‰ ÙƒØ§Ù… Ø®Ø±ÙˆÙØŸ", options: ["5", "9", "8"], answer: "9" },
      { q: "Ø¥Ø°Ø§ ØªØ²ÙˆØ¬Øª Ø§Ù…Ø±Ø£Ø© Ø¥ÙØ±ÙŠÙ‚ÙŠØ© Ø³ÙˆØ¯Ø§Ø¡ Ø¹Ø§Ù‚Ø± Ø¨Ø´Ø§Ø¨ Ø£ÙˆØ±ÙˆØ¨ÙŠ Ø£Ø¨ÙŠØ¶ØŒ ÙÙƒÙŠÙ Ø³ÙŠÙƒÙˆÙ† Ù„ÙˆÙ† Ø§Ø¨Ù†Ù‡Ù…Ø§ØŸ", options: ["Ø£Ø¨ÙŠØ¶", "Ø£Ø³Ù…Ø±", "Ø£Ø³ÙˆØ¯", "Ø£Ù†Ø§ Ù…Ø´ ØºØ¨ÙŠ"], answer: "Ø£Ù†Ø§ Ù…Ø´ ØºØ¨ÙŠ" },
      { q: "Ù‚Ø·Ø¹ Ø§Ù„Ø¹Ø¯Ø§Ø¡ Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠ Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ø§Ø±Ø§Ø«ÙˆÙ† ÙÙŠ Ø³Ø§Ø¹Ø© Ùˆ4 Ø¯Ù‚Ø§Ø¦Ù‚ Ùˆ5 Ø«ÙˆØ§Ù†ÙŠØŒ Ø£Ù…Ø§ Ø§Ù„Ø¹Ø¯Ø§Ø¡ Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ ÙÙ‚Ø·Ø¹ Ù†ÙØ³ Ø§Ù„Ù…Ø³Ø§ÙØ© ÙÙŠ Ø³Ø§Ø¹Ø© Ùˆ3 Ø¯Ù‚Ø§Ø¦Ù‚ Ùˆ70 Ø«Ø§Ù†ÙŠØ©ØŒ ÙØ£ÙŠÙ‡Ù…Ø§ Ø§Ù„Ø£Ø³Ø±Ø¹ØŸ", options: ["Ø§Ù„Ø¹Ø¯Ø§Ø¡ Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠ", "Ø§Ù„Ø¹Ø¯Ø§Ø¡ Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ", "Ù„Ù‡Ù…Ø§ Ù†ÙØ³ Ø§Ù„Ø³Ø±Ø¹Ø©", "Ø£Ù†Ø§ Ù…Ø´ ØºØ¨ÙŠ"], answer: "Ø§Ù„Ø¹Ø¯Ø§Ø¡ Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠ" },
      { q: "Ø®Ù„Ø§Ù„ Ø³Ø¨Ø§Ù‚ Ø§Ù„Ù…Ø§Ø±Ø§Ø«ÙˆÙ†ØŒ ÙˆÙ‚Ø¨Ù„ Ø®Ø· Ø§Ù„Ù†Ù‡Ø§ÙŠØ©ØŒ Ø¥Ø°Ø§ ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø¹Ø¯Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø¹ ÙÙƒÙ… Ø³ÙŠØµØ¨Ø­ ØªØ±ØªÙŠØ¨Ùƒ Ø¨Ø¹Ø¯ Ø°Ù„ÙƒØŸ", options: ["Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø«Ø§Ù†ÙŠ", "Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø«Ø§Ù„Ø«", "Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø±Ø§Ø¨Ø¹", "Ø£Ù†Ø§ Ù…Ø´ ØºØ¨ÙŠ"], answer: "Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø±Ø§Ø¨Ø¹" },
      { q: "Ø³ØªØ© Ø£Ø±Ø§Ù†Ø¨ ÙŠÙ„Ø²Ù…Ù‡Ø§ Ø³Øª Ø¯Ù‚Ø§Ø¦Ù‚ ÙƒÙŠ ØªØ£ÙƒÙ„ Ø³Øª Ø¬Ø²Ø±Ø§ØªØŒ ÙƒÙ… Ù…Ù† Ø§Ù„ÙˆÙ‚Øª ÙŠÙ„Ø²Ù… Ø«Ù„Ø§Ø« Ø£Ø±Ø§Ù†Ø¨ Ù„Ø£ÙƒÙ„ Ø«Ù„Ø§Ø« Ø¬Ø²Ø±Ø§ØªØŸ", options: ["Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø©", "3 Ø¯Ù‚Ø§Ø¦Ù‚", "6 Ø¯Ù‚Ø§Ø¦Ù‚", "Ø£Ù†Ø§ Ù…Ø´ ØºØ¨ÙŠ"], answer: "6 Ø¯Ù‚Ø§Ø¦Ù‚" },
      { q: "Ù…Ø¹Ø§Ùƒ Ø¹ÙˆØ¯ ÙƒØ¨Ø±ÙŠØª ÙˆØ§Ø­Ø¯ØŒ ÙˆØ¯Ø®Ù„Øª ØºØ±ÙØ© Ø¶Ù„Ù…Ø© ÙÙŠÙ‡Ø§ Ù…ØµØ¨Ø§Ø­ ØºØ§Ø² ÙˆÙˆØ±Ù‚ Ø¬Ø±Ø§Ø¦Ø¯ ÙˆØ®Ø´Ø¨ØŒ Ù‡ØªÙˆÙ„Ø¹ Ø¥ÙŠÙ‡ØŸ", options: ["Ø§Ù„Ø®Ø´Ø¨", "Ù‡ÙˆÙ„Ø¹ Ø§Ù„ÙˆØ±Ù‚", "Ø¹ÙˆØ¯ Ø§Ù„ÙƒØ¨Ø±ÙŠØª"], answer: "Ø¹ÙˆØ¯ Ø§Ù„ÙƒØ¨Ø±ÙŠØª" },
      { q: "Ù„Ùˆ Ù…Ø¹Ø§Ùƒ 6 ØªÙØ§Ø­Ø§Øª ÙˆØ£Ø®Ø°Øª 4 Ù…Ù†Ù‡Ø§ØŒ ÙƒÙ… ØªÙØ§Ø­Ø© Ù…Ø¹ÙƒØŸ", options: ["6", "2", "4"], answer: "4" },
      { q: "ÙƒÙ… Ù…Ø±Ø© ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ø±Ø­ Ø§Ù„Ø±Ù‚Ù… 10 Ù…Ù† Ø§Ù„Ø±Ù‚Ù… 100ØŸ", options: ["1", "10", "7"], answer: "1" },
      { q: "Ø£ÙƒØ¨Ø± Ø¹Ø¯Ø¯ Ø¨ÙŠÙ† 45 Ùˆ54 Ù‡ÙˆØŸ", options: ["45", "54", "50"], answer: "54" },
      { q: "Ø´ÙŠØ¡ Ù„ÙˆÙ†Ù‡ Ø£Ø®Ø¶Ø± ÙÙŠ Ø§Ù„Ø£Ø±Ø¶ ÙˆÙ„ÙƒÙ†Ù‡ Ø£Ø³ÙˆØ¯ Ø§Ù„Ù„ÙˆÙ† ÙÙŠ Ø§Ù„Ø£Ø³ÙˆØ§Ù‚ ÙˆØ¹Ù†Ø¯ Ø·Ù‡ÙŠÙ‡ ÙŠÙƒÙˆÙ† Ø£Ø­Ù…Ø± Ø§Ù„Ù„ÙˆÙ†ØŒ ÙÙ…Ø§ Ù‡ÙˆØŸ", options: ["Ø§Ù„ÙÙ„ÙÙ„", "Ø§Ù„Ø¨Ø§Ø°Ù†Ø¬Ø§Ù†", "Ø§Ù„Ø´Ø§ÙŠ"], answer: "Ø§Ù„Ø´Ø§ÙŠ" },
      { q: "ÙƒÙ… Ø­Ù„Ù‚Ø© ØªØ´ÙƒÙ„ Ø±Ù…Ø² Ø§Ù„Ø­Ù„Ù‚Ø§Øª Ø§Ù„Ø£ÙˆÙ„Ù…Ø¨ÙŠØ©ØŸ", options: ["6", "5", "4"], answer: "5" },
      { q: "Ø¨Ù„Øº Ø¹Ù…Ø± Ø£Ø­Ù…Ø¯ Ù†ØµÙ Ø¹Ù…Ø± Ø£Ø®ØªÙ‡ Ø¹Ù†Ø¯Ù…Ø§ ÙƒØ§Ù†Øª ÙÙŠ Ø§Ù„Ø³Ø§Ø¯Ø³Ø© Ù…Ù† Ø¹Ù…Ø±Ù‡Ø§ØŒ ÙÙƒÙ… Ø¹Ù…Ø± Ø£Ø­Ù…Ø¯ Ø¹Ù†Ø¯Ù…Ø§ ØªØ¨Ù„Øº Ø£Ø®ØªÙ‡ Ø§Ù„Ø£Ø±Ø¨Ø¹ÙŠÙ†ØŸ", options: ["37", "33", "26"], answer: "37" },
      { q: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¹Ù…Ø± Ø³Ù„Ù…Ù‰ Ø¶Ø¹Ù Ø¹Ù…Ø± Ø£Ø®ÙŠÙ‡Ø§ Ù…Ù†Ø° Ø£Ø±Ø¨Ø¹ Ø³Ù†ÙˆØ§ØªØŒ ÙˆØ§Ù„Ø¢Ù† ÙŠØ¨Ù„Øº Ø¹Ù…Ø± Ø£Ø®ÙŠÙ‡Ø§ Ø«Ù„Ø§Ø«Ø© Ø£Ø±Ø¨Ø§Ø¹ Ø¹Ù…Ø± Ø³Ù„Ù…Ù‰ØŒ ÙÙƒÙ… Ø¹Ù…Ø±Ù‡Ø§ØŸ", options: ["10", "12", "18"], answer: "12" },
      { q: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù‚Ø·Ø§Ø± Ø§Ù„ÙƒÙ‡Ø±Ø¨ÙŠ ÙŠØ³ÙŠØ± ÙÙŠ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¬Ù†ÙˆØ¨ØŒ ÙÙ…Ø§ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø°ÙŠ ÙŠØªØ¬Ù‡ ÙÙŠÙ‡ Ø§Ù„Ø¯Ø®Ø§Ù†ØŸ", options: ["Ù„Ø§ Ø´ÙŠØ¡ Ù…Ù…Ø§ Ø³Ø¨Ù‚", "Ø´Ù…Ø§Ù„", "Ø¬Ù†ÙˆØ¨", "Ø­Ø³Ø¨ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø±ÙŠØ§Ø­"], answer: "Ù„Ø§ Ø´ÙŠØ¡ Ù…Ù…Ø§ Ø³Ø¨Ù‚" },
      { q: "Ø¥Ø°Ø§ ÙƒÙ†Øª ÙˆØ§Ù‚ÙÙ‹Ø§ ÙÙŠ ÙˆØ³Ø· Ø§Ù„Ø³ÙˆØ¯Ø§Ù† Ø¨Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØºØ±Ø¨ Ø«Ù… Ø§Ù†Ø¹Ø·ÙØª ÙŠØ³Ø§Ø±Ù‹Ø§ØŒ ÙØ£ÙŠ Ø¨Ù„Ø¯ ØªÙ‚Ø¹ Ø´Ù…Ø§Ù„Ù‹Ø§ØŸ", options: ["Ù…ØµØ±", "Ù„ÙŠØ¨ÙŠØ§", "ØªØ´Ø§Ø¯"], answer: "Ù…ØµØ±" },
      { q: "Ø£ÙŠÙ† Ø³ÙŠØªÙ… Ø¯ÙÙ† Ø§Ù„Ù†Ø§Ø¬ÙŠÙ† Ù„Ùˆ Ø³Ù‚Ø·Øª Ø§Ù„Ø·Ø§Ø¦Ø±Ø© ÙÙŠ Ø§Ù„ØµØ­Ø±Ø§Ø¡ØŸ", options: ["Ø§Ù„ØµØ­Ø±Ø§Ø¡", "Ø­Ø³Ø¨ Ù…ÙƒØ§Ù† Ø§Ù„Ø·Ø§Ø¦Ø±Ø©", "Ù…Ø´ Ù‡ÙŠØ¯ÙÙ†Ùˆ"], answer: "Ù…Ø´ Ù‡ÙŠØ¯ÙÙ†Ùˆ" },
      { q: "Ø£Ù… Ø®Ø§Ù„Ø¯ Ù„Ø¯ÙŠÙ‡Ø§ 3 Ø£ÙˆÙ„Ø§Ø¯: Ø§Ø³Ù… Ø§Ù„ÙˆÙ„Ø¯ Ø§Ù„Ø£ÙˆÙ„ Ø®Ù…ÙŠØ³ØŒ ÙˆØ§Ù„ÙˆÙ„Ø¯ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¬Ù…Ø¹Ø©ØŒ ÙÙ…Ø§ Ø§Ø³Ù… Ø§Ù„ÙˆÙ„Ø¯ Ø§Ù„Ø«Ø§Ù„Ø«ØŸ", options: ["Ø³Ø¨Øª", "Ø®Ø§Ù„Ø¯", "Ø£Ø±Ø¨Ø¹", "Ù…Ø­Ù…Ø¯ Ø±Ù…Ø¶Ø§Ù†"], answer: "Ø®Ø§Ù„Ø¯" },
      { q: "Ù…Ø§Ø°Ø§ ÙŠÙƒÙˆÙ† Ø£Ù…Ø³ Ø¥Ø°Ø§ Ø¨Ù‚ÙŠ Ø¹Ù„Ù‰ ÙŠÙˆÙ… Ø§Ù„Ø§Ø«Ù†ÙŠÙ† ÙŠÙˆÙ…Ø§Ù†ØŸ", options: ["Ø§Ù„Ø³Ø¨Øª", "Ø§Ù„Ø£Ø­Ø¯", "Ø§Ù„Ø¬Ù…Ø¹Ø©"], answer: "Ø§Ù„Ø¬Ù…Ø¹Ø©" },
      { q: "Ù‚Ø¨Ù„ Ø§ÙƒØªØ´Ø§Ù Ù‚Ù…Ø© Ø¥ÙØ±Ø³ØªØŒ Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù‚Ù…Ø© Ø§Ù„ØªÙŠ ÙƒØ§Ù†Øª Ø£Ø¹Ù„Ù‰ ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", options: ["Ø¥ÙØ±Ø³Øª", "Ù…ÙƒÙ†Ù„ÙŠ", "Ø³Ø§Ù†Øª ÙƒØ§ØªØ±ÙŠÙ†"], answer: "Ø¥ÙØ±Ø³Øª" },
      { q: "Ø£Ø±Ø§Ø¯Øª Ø£Ù… Ø§Ù„Ø³ÙØ± Ù…Ø¹ Ø§Ø«Ù†ÙŠÙ† Ù…Ù† Ø£Ø·ÙØ§Ù„Ù‡Ø§ ÙØ§Ø´ØªØ±Øª Ø«Ù„Ø§Ø« Ø¹Ù„Ø¨ Ù…Ù† Ø¹ØµÙŠØ± Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ Ø¨Ø§Ù„Ø³ÙƒØ±ØŒ ÙØªØ°ÙƒØ±Øª Ù†ØµÙŠØ­Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨ Ù„Ù‡Ø§ Ø¨Ø¹Ø¯Ù… ØªÙ†Ø§ÙˆÙ„ Ø§Ù„Ø³ÙƒØ±ØŒ ÙˆÙƒØ§Ù†Øª Ù…Ø³ØªØ¹Ø¬Ù„Ø© ÙØªØ®Ù„Øª Ø¹Ù† Ø¹Ù„Ø¨ØªÙ‡Ø§ Ù„Ø·ÙÙ„ÙŠÙ‡Ø§ ÙˆØ·Ù„Ø¨Øª Ù…Ù†Ù‡Ù…Ø§ Ø£Ù† ÙŠØ´Ø±Ø¨Ø§ Ø§Ù„Ø¹Ù„Ø¨ Ø§Ù„Ø«Ù„Ø§Ø«Ø© ÙÙŠ Ø£Ù‚Ù„ ÙˆÙ‚Øª Ù…Ù…ÙƒÙ† Ù‚Ø¨Ù„ Ù‚Ø¯ÙˆÙ… Ø§Ù„Ù‚Ø·Ø§Ø±. ÙÙƒÙ… Ø£Ù‚Ù„ ÙˆÙ‚Øª Ù…Ù…ÙƒÙ† ÙŠÙ„Ø²Ù… Ø§Ù„Ø·ÙÙ„ÙŠÙ† Ù„Ø´Ø±Ø¨ Ø§Ù„Ø¹Ù„Ø¨ Ø§Ù„Ø«Ù„Ø§Ø«Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø´Ø±Ø¨ ÙƒÙ„ Ø¹Ù„Ø¨Ø© ÙŠØ³ØªØºØ±Ù‚ Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø©ØŸ", options: ["Ø¯Ù‚ÙŠÙ‚Ø©", "Ø¯Ù‚ÙŠÙ‚ØªØ§Ù†", "Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ†ØµÙ", "Ù…Ø´ Ø¹Ø§Ø±Ù"], answer: "Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ†ØµÙ" },
      { q: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø¬Ù…ÙˆØ¹ Ø¹Ø¯Ø¯ Ø³Ù†ÙˆØ§Øª Ø¹Ù…Ø± Ø§Ù„Ø£Ø¨ Ù…Ø¹ Ø¹Ø¯Ø¯ Ø³Ù†ÙˆØ§Øª Ø¹Ù…Ø± Ø§Ø¨Ù†Ù‡ ÙŠØ³Ø§ÙˆÙŠ 36ØŒ ÙÙƒÙ… Ù‡Ùˆ Ø¹Ù…Ø± Ø§Ù„Ø§Ø¨Ù† Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙØ§Ø±Ù‚ Ø¨ÙŠÙ†Ù‡Ù…Ø§ ÙÙŠ Ø§Ù„Ø¹Ù…Ø± 30 Ø³Ù†Ø©ØŸ", options: ["3 Ø³Ù†ÙˆØ§Øª", "6 Ø³Ù†ÙˆØ§Øª", "5 Ø³Ù†ÙˆØ§Øª", "Ù„Ø§ Ø£Ø¹Ø±Ù"], answer: "3 Ø³Ù†ÙˆØ§Øª" },
      { q: "Ø´ÙˆÙŠØ© Ø£ØµØ­Ø§Ø¨ Ù…Ø§Ø´ÙŠÙŠÙ† Ù…Ø¹ Ø¨Ø¹Ø¶ØŒ Ø£Ø±Ø¨Ø¹Ø© Ù‚Ø¯Ø§Ù… ÙˆØ§Ø­Ø¯ Ù…Ù†Ù‡Ù…ØŒ ÙˆØ£Ø±Ø¨Ø¹Ø© ÙˆØ±Ø§ ÙˆØ§Ø­Ø¯ Ù…Ù†Ù‡Ù…ØŒ ÙˆÙˆØ§Ø­Ø¯ ÙÙŠÙ‡Ù… ÙÙŠ Ø§Ù„Ù†ØµØŒ ÙŠØ¨Ù‚ÙˆØ§ ÙƒØ§Ù… ÙˆØ§Ø­Ø¯ØŸ", options: ["5", "8", "9", "7"], answer: "5" },
      { q: "ÙÙŠÙ‡ 12 Ø³Ù…ÙƒØ© ÙÙŠ Ø§Ù„Ø­ÙˆØ¶ØŒ 3 Ù…Ø§ØªÙˆØ§ØŒ 4 Ù‡Ø±Ø¨ÙˆØ§ØŒ ÙƒØ§Ù… ÙØ§Ø¶Ù„ÙŠÙ†ØŸ", options: ["7", "4", "12", "3"], answer: "12" },
      { q: "ÙƒØ§Ù… Ø´Ù‡Ø± ÙÙŠ Ø§Ù„Ø³Ù†Ø© Ø¹Ù†Ø¯Ù‡ 28 ÙŠÙˆÙ…ØŸ", options: ["1", "12", "2"], answer: "12" },
      { q: "Ø£Ù…Ø§Ù…Ùƒ Ø«Ù„Ø§Ø«Ø© Ø£Ø¨ÙˆØ§Ø¨ ÙˆØ¹Ù„ÙŠÙƒ Ø£Ù† ØªØ®ØªØ§Ø± ÙˆØ§Ø­Ø¯Ù‹Ø§ Ù…Ù†Ù‡Ø§ Ù„Ù„Ø¹Ø¨ÙˆØ± Ù…Ù† Ø®Ù„Ø§Ù„Ù‡: Ø§Ù„Ø¨Ø§Ø¨ Ø§Ù„Ø£ÙˆÙ„ ØªØ´ØªØ¹Ù„ Ø®Ù„ÙÙ‡ Ø§Ù„Ù†Ø§Ø± Ø§Ù„Ù…ØªÙˆÙ‡Ø¬Ø©ØŒ Ø§Ù„Ø¨Ø§Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ ÙŠÙ‚Ù Ø®Ù„ÙÙ‡ Ø±Ø¬Ù„ ÙŠØ­Ù…Ù„ Ù…Ø³Ø¯Ø³Ù‹Ø§ØŒ Ø§Ù„Ø¨Ø§Ø¨ Ø§Ù„Ø«Ø§Ù„Ø« ÙŠÙ‚Ù Ø®Ù„ÙÙ‡ Ø£Ø³Ø¯ Ù„Ù… ÙŠØªÙ†Ø§ÙˆÙ„ Ø§Ù„Ø·Ø¹Ø§Ù… Ù…Ù†Ø° Ø«Ù„Ø§Ø« Ø³Ù†ÙˆØ§Øª. ÙØ£ÙŠ Ø¨Ø§Ø¨ Ø³ØªÙ‚ÙˆÙ… Ø¨ÙØªØ­Ù‡ØŸ", options: ["Ø§Ù„Ø¨Ø§Ø¨ Ø§Ù„Ø£ÙˆÙ„", "Ø§Ù„Ø¨Ø§Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ", "Ø§Ù„Ø¨Ø§Ø¨ Ø§Ù„Ø«Ø§Ù„Ø«", "Ù…Ø´ Ø¹Ø§Ø±Ù"], answer: "Ø§Ù„Ø¨Ø§Ø¨ Ø§Ù„Ø«Ø§Ù„Ø«" }
    ];
    let questions = [];

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function prepareQuestions() {
      shuffleArray(allQuestions);
      questions = allQuestions.slice(0, 10);
    }

    prepareQuestions();

    document.getElementById("startBtn").addEventListener("click", startQuiz);

    async function startQuiz() {
      playerName = document.getElementById("playerName").value.trim();
      if (!playerName) { alert("ÙŠØ§Ø¹Ù… Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø§ÙˆÙ„ Ù…ØªØªØ¹Ø¨Ù†ÙŠØ´"); return; }

      const querySnapshot = await getDocs(collection(db, "scores"));
      let nameExists = false;
      querySnapshot.forEach(doc => { if (doc.data().name === playerName) nameExists = true; });
      if (nameExists) { alert("Ø§Ù„Ø§Ø³Ù… Ø¯Ø§ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø®ØªØ§Ø± Ø§Ø³Ù… ØªØ§Ù†ÙŠ."); return; }

      document.getElementById("startScreen").style.display = "none";
      document.getElementById("quizScreen").style.display = "block";
      loadQuestion();
    }

    function updateProgress() {
      const total = questions.length || 1;
      const displayIndex = Math.min(currentQuestion + 1, total);
      const progress = (displayIndex / total) * 100;
      document.getElementById("progressBar").style.width = `${progress}%`;
      document.getElementById("questionCount").textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${displayIndex} Ù…Ù† ${total}`;
    }

    function loadQuestion() {
      if (currentQuestion >= questions.length) { updateProgress(); endQuiz(); return; }

      updateProgress();

      const q = questions[currentQuestion];
      document.getElementById("questionText").textContent = q.q;
      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";

      q.options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.disabled = false;
        btn.addEventListener("click", () => {
          optionsDiv.querySelectorAll('button').forEach(b => b.disabled = true);
          if (opt.trim() === q.answer.trim()) score++;
          currentQuestion++;
          loadQuestion();
        });
        optionsDiv.appendChild(btn);
      });
    }

    async function endQuiz() {
      document.getElementById("quizScreen").style.display = "none";
      document.getElementById("resultScreen").style.display = "block";

      const finalScoreEl = document.getElementById("finalScore");
      finalScoreEl.textContent = `Ù†ØªÙŠØ¬ØªÙƒ: ${score} Ù…Ù† ${questions.length}`;
      const commentBox = document.getElementById("commentBox");

      if (score >= 0 && score <= 2) { 
      finalScoreEl.style.color = "red";
      commentBox.innerHTML = `
      <p style="font-size:20px;">Ø§Ù†Øª Ù…Ø­ØªØ§Ø¬ ØªØ¹Ù…Ù„ Ù†Ø³Ø®Ø©</p>
      <video src="videos/0.mp4" style="max-width:350px; border-radius:10px;" autoplay loop></video>`;
    } else if (score >= 3 && score <= 4) { 
      finalScoreEl.style.color = "lightred";
      commentBox.innerHTML = `
      <p style="font-size:20px;">Ù‚ÙˆÙ„ÙŠ Ø§Ù†Øª Ø§Ø²Ø§ÙŠ Ø¹Ø§ÙŠØ´ ÙƒØ¯Ø§</p>
      <video src="videos/2.mp4" style="max-width:350px; border-radius:10px;" autoplay loop></video>`;
    } else if (score >= 5 && score <= 6) { 
      finalScoreEl.style.color = "orange";
      commentBox.innerHTML = `
      <p style="font-size:20px;">Ø§Ù†Øª ÙƒØ¯Ø§ Ù†Ø§Ø¬Ø­ Ø¨Ø§Ù„Ø±Ø§ÙØ© Ù…ÙÙŠØ´ Ø§Ù…Ù„ ÙÙŠÙƒ</p>
      <video src="videos/5.mp4" style="max-width:350px; border-radius:10px;" autoplay loop></video>`;
     } else if (score >= 7 && score <= 9) { 
      finalScoreEl.style.color = "green";
      commentBox.innerHTML = `
      <p style="font-size:20px;">ÙÙŠ Ø§Ù…Ù„ </p>
      <video src="videos/8.mp4" style="max-width:350px; border-radius:10px;" autoplay loop></video>`;
     } else if (score === 10) { 
     finalScoreEl.style.color = "lightgreen";
     commentBox.innerHTML = `<p style="font-size:20px;">Ø£Ù†Ø§ Ù…Ø¨Ø³ÙˆØ· Ø¨ÙŠÙƒ</p><video src="videos/10.mp4" style="max-width:350px; border-radius:10px;" autoplayloop></video>`;
    }


      const deviceInfo = navigator.userAgent;
      const dateTime = new Date().toLocaleString();

      await addDoc(collection(db, "scores"), {
        name: playerName,
        score: score,
        datetime: dateTime,
        device: deviceInfo
      });

      loadLeaderboard("leaderboardListResult");
    }

    document.getElementById("refreshBtn").addEventListener("click", () => location.reload());

    async function loadLeaderboard(elementId = "leaderboardList") {
      const querySnapshot = await getDocs(collection(db, "scores"));
      let scores = [];
      querySnapshot.forEach(doc => scores.push(doc.data()));
      scores.sort((a, b) => b.score - a.score);

      const list = document.getElementById(elementId);
      list.innerHTML = "";
      let half = Math.floor(questions.length / 2);

      scores.forEach((s, index) => {
        const row = document.createElement("div");
        row.classList.add("player-row");
        if (s.name === playerName) row.classList.add("highlight");

        let color = "lightgreen";
        if (s.score < half) color = "red";
        else if (s.score === half) color = "orange";

        row.innerHTML = `
          <div class="rank">${index + 1}</div>
          <div class="player-info" style="color:${color}">
            <span>${s.name}</span>
            <span>${s.score}</span>
          </div>
        `;
        list.appendChild(row);
      });
    }

    loadLeaderboard();
  </script>

  <script>
    function toggleMenu() {
      document.getElementById("dropdownMenu").classList.toggle("show");
    }
  </script>
</body>
</html>


