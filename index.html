<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Game</title>
  <link rel="stylesheet" href="css/quizz.css">
  <style>
  </style>
</head>
<body>
    <!-- Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
<div class="menu-wrapper">
    <div class="menu-icon" onclick="toggleMenu()">
      <div></div>
      <div></div>
      <div></div>
    </div>
  
    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ù†Ø³Ø¯Ù„ -->
    <div class="dropdown-menu" id="dropdownMenu">
      <a href="https://abdomostafa117.github.io/protofolio/"><button onclick="whoIAm()">Who I Am</button></a>
      <a href="leave.html"><button onclick="contactMe()">Contact Me</button></a>
    </div>
  </div>

  <div class="container">
    <a href="https://abdomostafa117.github.io/protofolio/"><img src="img/am1r.png" class="logo" alt="Logo"></a>
    <h1>Ø¨ØªØ§Ø¹Ùƒ IQ Ø§Ù†Øª Ùˆ</h1>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
    <div id="startScreen">
      <input type="text" id="playerName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§ ÙˆØ¨Ù„Ø§Ø´ Ø§Ø³Ø§Ù…ÙŠ ØºØ±ÙŠØ¨Ù‡">
      <br>
      <button id="startBtn">Ø§Ø¨Ø¯Ø£ </button>

      <div class="leaderboard">
        <h2>Leadboard ğŸ†</h2>
        <div id="leaderboardList"></div>
      </div>
    </div>
    

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
    <div id="quizScreen" style="display:none;">
      <div class="question-box">
        <h2 id="questionText"></h2>
        <div id="options"></div>
      </div>
    </div>
    

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
    <div id="resultScreen" style="display:none;">
      <h2 id="finalScore"></h2>
      <div id="commentBox" class="comment-box"></div>
      <div class="leaderboard">
        <h2>Leadboard ğŸ†</h2>
        <div id="leaderboardListResult"></div>
      </div>
    </div>
  </div>

  
  
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyApE6uStJgmNqJFi7K1AvkUWDxPVUhmVIQ",
      authDomain: "quizz-game-633ea.firebaseapp.com",
      projectId: "quizz-game-633ea",
      storageBucket: "quizz-game-633ea.firebasestorage.app",
      messagingSenderId: "595850731411",
      appId: "1:595850731411:web:14fd071e91d677b1491266",
      measurementId: "G-B2L0T21JWQ"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let playerName = "";
    let currentQuestion = 0;
    let score = 0;

    // ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
    let allQuestions = [
      { q: "Ù„Ùˆ Ø¹Ø¯Ù‘ÙŠØª Ø§Ù„Ù…ØªØ³Ø§Ø¨Ù‚ Ø§Ù„ØªØ§Ù†ÙŠØŒ ØªØ¨Ù‚Ù‰ ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„ÙƒØ§Ù…ØŸ", options: ["Ø§Ù„Ø£ÙˆÙ„", "Ø§Ù„ØªØ§Ù†ÙŠ", "Ø§Ù„ØªØ§Ù„Øª"], answer: "Ø§Ù„ØªØ§Ù†ÙŠ" },
      { q: "Ù…Ø²Ø±Ø¹Ù‡ ÙÙŠÙ‡Ø§ 14 Ø®Ø±ÙˆÙ ÙƒÙ„Ù‡Ù… Ù…Ø§ØªÙˆ Ø§Ù„Ø§ 9 Ø§ØªØ¨Ù‚ÙŠ ÙƒØ§Ù… Ø®Ø±ÙˆÙ ØŸ", options: ["5", "9", "8"], answer: "9" },
      { q: "Ù…Ø¹Ø§Ùƒ Ø¹ÙˆØ¯ ÙƒØ¨Ø±ÙŠØª ÙˆØ§Ø­Ø¯ØŒ ÙˆØ¯Ø®Ù„Øª ØºØ±ÙØ© Ø¶Ù„Ù…Ø© ÙÙŠÙ‡Ø§ Ù…ØµØ¨Ø§Ø­ ØºØ§Ø² ÙˆÙˆØ±Ù‚ Ø¬Ø±Ø§Ø¦Ø¯ ÙˆØ®Ø´Ø¨ØŒ Ù‡ØªÙˆÙ„Ø¹ Ø§ÙŠØ© ØŸ", options: [" Ø§Ù„Ø®Ø´Ø¨ ", "Ù‡ÙˆÙ„Ø¹ Ø§Ù„ÙˆØ±Ù‚", "Ø¹ÙˆØ¯ Ø§Ù„ÙƒØ¨Ø±ÙŠØª"], answer: "Ø¹ÙˆØ¯ Ø§Ù„ÙƒØ¨Ø±ÙŠØª" },
      { q: "Ù„Ùˆ Ù…Ø¹Ø§Ùƒ 6 ØªÙØ§Ø­Ø§Øª ÙˆØ£Ø®Ø°Øª 4 Ù…Ù†Ù‡Ø§ØŒ ÙƒÙ… ØªÙØ§Ø­Ø© Ù…Ø¹ÙƒØŸ", options: ["6", "2", "4"], answer: "4" },
      { q: "ÙƒÙ… Ù…Ø±Ø© ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ø±Ø­ Ø§Ù„Ø±Ù‚Ù… 10 Ù…Ù† Ø§Ù„Ø±Ù‚Ù… 100ØŸ", options: ["1", "10", "7"], answer: "1" },
      { q: "Ø£ÙƒØ¨Ø± Ø¹Ø¯Ø¯ Ø¨ÙŠÙ† 45 Ùˆ 54 Ù‡ÙˆØŸ", options: ["45", "54", "50"], answer: "54" },
      { q: "Ø´ÙŠØ¡ Ù„ÙˆÙ†Ù‡ Ø£Ø®Ø¶Ø± ÙÙŠ Ø§Ù„Ø£Ø±Ø¶ ÙˆÙ„ÙƒÙ†Ù‡ Ø£Ø³ÙˆØ¯ Ø§Ù„Ù„ÙˆÙ† ÙÙŠ Ø§Ù„Ø£Ø³ÙˆØ§Ù‚ ÙˆØ¹Ù†Ø¯ Ø·Ù‡ÙŠÙ‡ ÙŠÙƒÙˆÙ† Ø£Ø­Ù…Ø± Ø§Ù„Ù„ÙˆÙ† ÙÙ…Ø§ ÙŠÙƒÙˆÙ†ØŸ", options: ["Ø§Ù„ÙÙ„ÙÙ„", "Ø§Ù„Ø¨Ø§Ø°Ù†Ø¬Ø§Ù†", "Ø§Ù„Ø´Ø§ÙŠ"], answer: "Ø§Ù„Ø´Ø§ÙŠ" },
      { q: "ÙƒÙ… Ø­Ù„Ù‚Ø© ØªØ´ÙƒÙ„ Ø±Ù…Ø² Ø§Ù„Ø­Ù„Ù‚Ø§Øª Ø§Ù„Ø£ÙˆÙ„Ù…Ø¨ÙŠØ©ØŸ", options: ["6", "5", "4"], answer: "5" },
      { q: "Ø¨Ù„Øº Ø¹Ù…Ø± Ø£Ø­Ù…Ø¯ Ù†ØµÙ Ø¹Ù…Ø± Ø£Ø®ØªÙ‡ Ø¹Ù†Ø¯Ù…Ø§ ÙƒØ§Ù†Øª ÙÙŠ Ø§Ù„Ø³Ø§Ø¯Ø³Ø© Ù…Ù† Ø¹Ù…Ø±Ù‡Ø§ØŒ ÙÙƒÙ… Ø¹Ù…Ø± Ø£Ø­Ù…Ø¯ Ø¹Ù†Ø¯Ù…Ø§ ØªØ¨Ù„Øº Ø£Ø®ØªÙ‡ Ø§Ù„Ø£Ø±Ø¨Ø¹ÙŠÙ†ØŸ", options: ["37", "33", "26"], answer: "37" },
      { q: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¹Ù…Ø± Ø³Ù„Ù…Ù‰ Ø¶Ø¹Ù Ø¹Ù…Ø± Ø£Ø®ÙŠÙ‡Ø§ Ù…Ù†Ø° Ø£Ø±Ø¨Ø¹ Ø³Ù†ÙˆØ§ØªØŒ ÙˆØ§Ù„Ø¢Ù† ÙŠØ¨Ù„Øº Ø¹Ù…Ø± Ø£Ø®ÙŠÙ‡Ø§ Ø«Ù„Ø§Ø«Ø© Ø£Ø±Ø¨Ø§Ø¹ Ø¹Ù…Ø± Ø³Ù„Ù…Ù‰ØŒ ÙÙƒÙ… Ø¹Ù…Ø±Ù‡Ø§ØŸ ", options: ["10", "12", "18"], answer: "12" },
      { q: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù‚Ø·Ø§Ø± Ø§Ù„ÙƒÙ‡Ø±Ø¨ÙŠ ÙŠØ³ÙŠØ± ÙÙŠ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¬Ù†ÙˆØ¨ØŒ ÙÙ…Ø§ ÙŠÙƒÙˆÙ† Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø°ÙŠ ÙŠØªØ¬Ù‡ ÙÙŠÙ‡ Ø§Ù„Ø¯Ø®Ø§Ù†ØŸ", options: ["Ù„Ø§ Ø´ÙŠ Ù…Ù…Ø§ Ø³Ø¨Ù‚", "Ø´Ù…Ø§Ù„", "Ø¬Ù†ÙˆØ¨","Ø­Ø³Ø¨ Ø§ØªØ¬Ø§Ø© Ø§Ù„Ø±ÙŠØ§Ø­"], answer: "Ù„Ø§ Ø´ÙŠ Ù…Ù…Ø§ Ø³Ø¨Ù‚" }, 
      { q: "Ø¥Ø°Ø§ ÙƒÙ†Øª ÙˆØ§Ù‚ÙÙ‹Ø§ ÙÙŠ ÙˆØ³Ø· Ø§Ù„Ø³ÙˆØ¯Ø§Ù† Ø¨Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØºØ±Ø¨ Ø«Ù… Ø§Ù†Ø¹Ø·ÙØª ÙŠØ³Ø§Ø±Ù‹Ø§ØŒ ÙØ£ÙŠ Ø¨Ù„Ø¯ ØªÙ‚Ø¹ Ø´Ù…Ø§Ù„Ù‹Ø§ØŸ", options: ["Ù…ØµØ±", "Ù„ÙŠØ¨ÙŠØ§", "ØªØ´Ø§Ø¯"], answer: "Ù…ØµØ±" },
      { q: "Ø§ÙŠÙ† Ø³ÙŠØªÙ… Ø¯ÙÙ† Ø§Ù„Ù†Ø§Ø¬ÙŠÙ† Ù„Ùˆ Ø³Ù‚Ø·Øª Ø§Ù„Ø·Ø§Ø¦Ø±Ø© ÙÙŠ Ø§Ù„ØµØ­Ø±Ø§Ø¡ØŸ", options: ["Ø§Ù„ØµØ­Ø±Ø§Ø¡", "Ø­Ø³Ø¨ Ù…ÙƒØ§Ù† Ø§Ù„Ø·Ø§Ø¦Ø±Ù‡", "Ù…Ø´ Ù‡ÙŠØ¯ÙÙ†Ùˆ"], answer: "Ù…Ø´ Ù‡ÙŠØ¯ÙÙ†Ùˆ" },
      { q: "Ø§Ù… Ø®Ø§Ù„Ø¯ Ù„Ø¯ÙŠÙ‡Ø§ 3 Ø§ÙˆÙ„Ø§Ø¯ Ø§Ø³Ù… Ø§Ù„ÙˆÙ„Ø¯ Ø§Ù„Ø§ÙˆÙ„ Ø®Ù…ÙŠØ³ Ùˆ Ø§Ù„ÙˆÙ„Ø¯ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¬Ù…Ø¹Ù‡ ÙÙ…Ø§ Ø§Ø³Ù… Ø§Ù„ÙˆÙ„Ø¯ Ø§Ù„Ø«Ø§Ù„Ø«ØŸ", options: ["Ø³Ø¨Øª", "Ø®Ø§Ù„Ø¯", "Ø§Ø±Ø¨Ø¹" , "Ù…Ø­Ù…Ø¯ Ø±Ù…Ø¶Ø§Ù†"], answer: "Ø®Ø§Ù„Ø¯" },
      { q: "Ù…Ø§Ø°Ø§ ÙŠÙƒÙˆÙ† Ø§Ù…Ø³ Ø§Ø°Ø§ Ø¨Ù‚ÙŠ Ø¹Ù„ÙŠ ÙŠÙˆÙ… Ø§Ù„Ø§Ø«Ù†ÙŠÙ† ÙŠÙˆÙ…Ø§Ù†ØŸ", options: ["Ø§Ù„Ø³Ø¨Øª", " Ø§Ù„Ø§Ø­Ø¯ ", "Ø§Ù„Ø¬Ù…Ø¹Ø©"], answer: "Ø§Ù„Ø¬Ù…Ø¹Ø©" },
      { q: "Ù‚Ø¨Ù„ Ø§ÙƒØªØ´Ø§Ù Ù‚Ù…Ø© Ø§ÙØ±Ø³Øª Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù‚Ù…Ø© Ø§Ù„ØªÙŠ ÙƒØ§Ù†Øª Ø§Ø¹Ù„ÙŠ ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", options: ["Ø§ÙØ±Ø³Øª", "Ù…ÙƒÙ†Ù„ÙŠ", "Ø³Ø§Ù†Øª ÙƒØ§ØªØ±ÙŠÙ†"], answer: "Ø§ÙØ±Ø³Øª" },      
    ];

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Ø§Ø®ØªÙŠØ§Ø± 10 Ø£Ø³Ø¦Ù„Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
    shuffleArray(allQuestions);
    const questions = allQuestions.slice(0, 10);

    document.getElementById("startBtn").addEventListener("click", startQuiz);

    async function startQuiz() {
      playerName = document.getElementById("playerName").value.trim();
      if (!playerName) {
        alert("ÙŠØ§Ø¹Ù… Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø§ÙˆÙ„ Ù…ØªØªØ¹Ø¨Ù†ÙŠØ´");
        return;
      }

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø³Ù… ÙÙŠ Firebase
      const querySnapshot = await getDocs(collection(db, "scores"));
      let nameExists = false;
      querySnapshot.forEach(doc => {
        if (doc.data().name === playerName) nameExists = true;
      });

      if (nameExists) {
        alert("Ø§Ù„Ø§Ø³Ù… Ø¯Ø§ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø®ØªØ§Ø± Ø§Ø³Ù… ØªØ§Ù†ÙŠ.");
        return;
      }

      document.getElementById("startScreen").style.display = "none";
      document.getElementById("quizScreen").style.display = "block";
      loadQuestion();
    }

    function loadQuestion() {
      if (currentQuestion >= questions.length) {
        endQuiz();
        return;
      }
      const q = questions[currentQuestion];
      document.getElementById("questionText").textContent = q.q;
      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";
      q.options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => {
          if (opt === q.answer) score++;
          currentQuestion++;
          loadQuestion();
        };
        optionsDiv.appendChild(btn);
      });
    }

    async function endQuiz() {
  document.getElementById("quizScreen").style.display = "none";
  document.getElementById("resultScreen").style.display = "block";

  const finalScoreEl = document.getElementById("finalScore");
  finalScoreEl.textContent = `Ù†ØªÙŠØ¬ØªÙƒ: ${score} Ù…Ù† ${questions.length}`;
  let commentBox = document.getElementById("commentBox");

  if (score >= 0 && score <= 2) { 
    finalScoreEl.style.color = "red";
    commentBox.innerHTML = `<p style="font-size:20px;">Ù‚ÙˆÙ„ÙŠÙŠ Ø§Ù†Øª Ø¹Ø§ÙŠØ´ Ù„ÙŠÙŠÙ‡ </p><img src="img/4.webp" alt="ğŸ˜…" style="max-width:200px">`;
  } else if (score >= 3 && score <= 4) { 
    finalScoreEl.style.color = "red";
    commentBox.innerHTML = `<p style="font-size:20px;">ÙŠØ§Ø¹Ù… Ø¨Ù‚ÙŠ Ø­Ø±Ø§Ù… Ø¹Ù„ÙŠÙƒ Ù†ÙØ³Ùƒ </p><img src="img/2.webp" alt="ğŸ˜" style="max-width:200px">`;
  } else if (score >= 5 && score <= 6) { 
    finalScoreEl.style.color = "orange";
    commentBox.innerHTML = `<p style="font-size:20px;">Ø§Ù†Øª ÙƒØ¯Ø§ Ù†Ø§Ø¬Ø­ Ø¨Ø§Ù„Ø±Ø§ÙØ© Ù…ÙÙŠØ´ Ø§Ù…Ù„ ÙÙŠÙƒ</p><img src="img/3.webp" alt="ğŸ‰" style="max-width:220px">`;
  } else if (score >= 7 && score <= 9) { // 7 â€“ 9 Ø£Ø®Ø¶Ø±
    finalScoreEl.style.color = "lightgreen";
    commentBox.innerHTML = `<p style="font-size:20px;">Ù‡Ø§Ù†Øª </p><img src="img/7.webp" alt="ğŸ˜‰" style="max-width:250px">`;
  } else if (score === 10) { // 10 Ø£Ø®Ø¶Ø± Ø¯Ø§ÙƒÙ†
    finalScoreEl.style.color = "green";
    commentBox.innerHTML = `<p style="font-size:20px;"> Ø£Ù†Ø§ Ù…Ø¨Ø³ÙˆØ· Ø¨ÙŠÙƒ</p><img src="img/1.webp" alt="ğŸ˜" style="max-width:300px">`;
  }

  // Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Firebase
  await addDoc(collection(db, "scores"), {
    name: playerName,
    score: score
  });

  // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†
  loadLeaderboard("leaderboardListResult");
}


    async function loadLeaderboard(elementId = "leaderboardList") {
      const querySnapshot = await getDocs(collection(db, "scores"));
      let scores = [];
      querySnapshot.forEach(doc => scores.push(doc.data()));
      scores.sort((a, b) => b.score - a.score);

      const list = document.getElementById(elementId);
      list.innerHTML = "";
      let half = Math.floor(questions.length / 2);

      scores.forEach((s, index) => {
        const row = document.createElement("div");
        row.classList.add("player-row");
        if (s.name === playerName) row.classList.add("highlight");

        let color = "lightgreen";
        if (s.score < half) color = "red";
        else if (s.score === half) color = "orange";

        row.innerHTML = `
          <div class="rank">${index + 1}</div>
          <div class="player-info" style="color:${color}">
            <span>${s.name}</span>
            <span>${s.score}</span>
          </div>
        `;
        list.appendChild(row);
      });
    }

    loadLeaderboard();
    
  </script>
  <script>
    function toggleMenu() {
  const menu = document.getElementById("dropdownMenu");
  menu.classList.toggle("show");
}

  </script>
  </body>
</body>
</html>


