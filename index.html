<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Game</title>
  <link rel="stylesheet" href="css/quizz.css">
  <style>
  </style>
</head>
<body>
    <!-- ุฒุฑ ุงููุงุฆูุฉ -->
<div class="menu-wrapper">
    <div class="menu-icon" onclick="toggleMenu()">
      <div></div>
      <div></div>
      <div></div>
    </div>
  
    <!-- ุงูุดุฑูุท ุงูููุณุฏู -->
    <div class="dropdown-menu" id="dropdownMenu">
      <a href="https://abdomostafa117.github.io/protofolio/"><button onclick="whoIAm()">Who I Am</button></a>
      <a href="leave.html"><button onclick="contactMe()">Contact Me</button></a>
    </div>
  </div>

  <div class="container">
    <a href="https://abdomostafa117.github.io/protofolio/"><img src="img/am1r.png" class="logo" alt="Logo"></a>
    <h1>ุจุชุงุนู IQ ุงูุช ู</h1>

    <!-- ุดุงุดุฉ ุงูุจุฏุงูุฉ -->
    <div id="startScreen">
      <input type="text" id="playerName" placeholder="ุงูุชุจ ุงุณูู ููุง ูุจูุงุด ุงุณุงูู ุบุฑูุจู">
      <br>
      <button id="startBtn">ุงุจุฏุฃ </button>

      <div class="leaderboard">
        <h2>Leadboard ๐</h2>
        <div id="leaderboardList"></div>
      </div>
    </div>
    

    <!-- ุดุงุดุฉ ุงูุฃุณุฆูุฉ -->
    <div id="quizScreen" style="display:none;">
      <div class="question-box">
        <h2 id="questionText"></h2>
        <div id="options"></div>
      </div>
    </div>
    

    <!-- ุดุงุดุฉ ุงููุชูุฌุฉ -->
    <div id="resultScreen" style="display:none;">
      <h2 id="finalScore"></h2>
      <div id="commentBox" class="comment-box"></div>
      <div class="leaderboard">
        <h2>Leadboard ๐</h2>
        <div id="leaderboardListResult"></div>
      </div>
    </div>
  </div>

  
  
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyApE6uStJgmNqJFi7K1AvkUWDxPVUhmVIQ",
      authDomain: "quizz-game-633ea.firebaseapp.com",
      projectId: "quizz-game-633ea",
      storageBucket: "quizz-game-633ea.firebasestorage.app",
      messagingSenderId: "595850731411",
      appId: "1:595850731411:web:14fd071e91d677b1491266",
      measurementId: "G-B2L0T21JWQ"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let playerName = "";
    let currentQuestion = 0;
    let score = 0;

    // ูู ุงูุฃุณุฆูุฉ
    let allQuestions = [
      { q: "ูู ุนุฏููุช ุงููุชุณุงุจู ุงูุชุงููุ ุชุจูู ูู ุงููุฑูุฒ ุงููุงูุ", options: ["ุงูุฃูู", "ุงูุชุงูู", "ุงูุชุงูุช"], answer: "ุงูุชุงูู" },
      { q: "ูุฒุฑุนู ูููุง 14 ุฎุฑูู ูููู ูุงุชู ุงูุง 9 ุงุชุจูู ูุงู ุฎุฑูู ุ", options: ["5", "9", "8"], answer: "9" },
      { q: "ูุนุงู ุนูุฏ ูุจุฑูุช ูุงุญุฏุ ูุฏุฎูุช ุบุฑูุฉ ุถููุฉ ูููุง ูุตุจุงุญ ุบุงุฒ ููุฑู ุฌุฑุงุฆุฏ ูุฎุดุจุ ูุชููุน ุงูุฉ ุ", options: [" ุงูุฎุดุจ ", "ูููุน ุงููุฑู", "ุนูุฏ ุงููุจุฑูุช"], answer: "ุนูุฏ ุงููุจุฑูุช" },
      { q: "ูู ูุนุงู 6 ุชูุงุญุงุช ูุฃุฎุฐุช 4 ูููุงุ ูู ุชูุงุญุฉ ูุนูุ", options: ["6", "2", "4"], answer: "4" },
      { q: "ูู ูุฑุฉ ููููู ุทุฑุญ ุงูุฑูู 10 ูู ุงูุฑูู 100ุ", options: ["1", "10", "7"], answer: "1" },
      { q: "ุฃูุจุฑ ุนุฏุฏ ุจูู 45 ู 54 ููุ", options: ["45", "54", "50"], answer: "54" },
      { q: "ุดูุก ูููู ุฃุฎุถุฑ ูู ุงูุฃุฑุถ ููููู ุฃุณูุฏ ุงูููู ูู ุงูุฃุณูุงู ูุนูุฏ ุทููู ูููู ุฃุญูุฑ ุงูููู ููุง ููููุ", options: ["ุงููููู", "ุงูุจุงุฐูุฌุงู", "ุงูุดุงู"], answer: "ุงูุดุงู" },
      { q: "ูู ุญููุฉ ุชุดูู ุฑูุฒ ุงูุญููุงุช ุงูุฃูููุจูุฉุ", options: ["6", "5", "4"], answer: "5" },
      { q: "ุจูุบ ุนูุฑ ุฃุญูุฏ ูุตู ุนูุฑ ุฃุฎุชู ุนูุฏูุง ูุงูุช ูู ุงูุณุงุฏุณุฉ ูู ุนูุฑูุงุ ููู ุนูุฑ ุฃุญูุฏ ุนูุฏูุง ุชุจูุบ ุฃุฎุชู ุงูุฃุฑุจุนููุ", options: ["37", "33", "26"], answer: "37" },
      { q: "ุฅุฐุง ูุงู ุนูุฑ ุณููู ุถุนู ุนูุฑ ุฃุฎููุง ููุฐ ุฃุฑุจุน ุณููุงุชุ ูุงูุขู ูุจูุบ ุนูุฑ ุฃุฎููุง ุซูุงุซุฉ ุฃุฑุจุงุน ุนูุฑ ุณูููุ ููู ุนูุฑูุงุ ", options: ["10", "12", "18"], answer: "12" },
      { q: "ุฅุฐุง ูุงู ุงููุทุงุฑ ุงูููุฑุจู ูุณูุฑ ูู ุงุชุฌุงู ุงูุฌููุจุ ููุง ูููู ุงูุงุชุฌุงู ุงูุฐู ูุชุฌู ููู ุงูุฏุฎุงูุ", options: ["ูุง ุดู ููุง ุณุจู", "ุดูุงู", "ุฌููุจ","ุญุณุจ ุงุชุฌุงุฉ ุงูุฑูุงุญ"], answer: "ูุง ุดู ููุง ุณุจู" }, 
      { q: "ุฅุฐุง ููุช ูุงูููุง ูู ูุณุท ุงูุณูุฏุงู ุจุงุชุฌุงู ุงูุบุฑุจ ุซู ุงูุนุทูุช ูุณุงุฑูุงุ ูุฃู ุจูุฏ ุชูุน ุดูุงููุงุ", options: ["ูุตุฑ", "ููุจูุง", "ุชุดุงุฏ"], answer: "ูุตุฑ" },
      { q: "ุงูู ุณูุชู ุฏูู ุงููุงุฌูู ูู ุณูุทุช ุงูุทุงุฆุฑุฉ ูู ุงูุตุญุฑุงุกุ", options: ["ุงูุตุญุฑุงุก", "ุญุณุจ ููุงู ุงูุทุงุฆุฑู", "ูุด ููุฏููู"], answer: "ูุด ููุฏููู" },
      { q: "ุงู ุฎุงูุฏ ูุฏููุง 3 ุงููุงุฏ ุงุณู ุงูููุฏ ุงูุงูู ุฎููุณ ู ุงูููุฏ ุงูุซุงูู ุฌูุนู ููุง ุงุณู ุงูููุฏ ุงูุซุงูุซุ", options: ["ุณุจุช", "ุฎุงูุฏ", "ุงุฑุจุน" , "ูุญูุฏ ุฑูุถุงู"], answer: "ุฎุงูุฏ" },
      { q: "ูุงุฐุง ูููู ุงูุณ ุงุฐุง ุจูู ุนูู ููู ุงูุงุซููู ูููุงูุ", options: ["ุงูุณุจุช", " ุงูุงุญุฏ ", "ุงูุฌูุนุฉ"], answer: "ุงูุฌูุนุฉ" },
      { q: "ูุจู ุงูุชุดุงู ููุฉ ุงูุฑุณุช ูุง ูู ุงูููุฉ ุงูุชู ูุงูุช ุงุนูู ูู ุงูุนุงููุ", options: ["ุงูุฑุณุช", "ููููู", "ุณุงูุช ูุงุชุฑูู"], answer: "ุงูุฑุณุช" },      
    ];

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // ุงุฎุชูุงุฑ 10 ุฃุณุฆูุฉ ุนุดูุงุฆูุฉ
    shuffleArray(allQuestions);
    const questions = allQuestions.slice(0, 10);

    document.getElementById("startBtn").addEventListener("click", startQuiz);

    async function startQuiz() {
      playerName = document.getElementById("playerName").value.trim();
      if (!playerName) {
        alert("ูุงุนู ุงูุชุจ ุงุณูู ุงูุงูู ูุชุชุนุจููุด");
        return;
      }

      // ุงูุชุญูู ูู ุงูุงุณู ูู Firebase
      const querySnapshot = await getDocs(collection(db, "scores"));
      let nameExists = false;
      querySnapshot.forEach(doc => {
        if (doc.data().name === playerName) nameExists = true;
      });

      if (nameExists) {
        alert("ุงูุงุณู ุฏุง ููุฌูุฏ ุงุฎุชุงุฑ ุงุณู ุชุงูู.");
        return;
      }

      document.getElementById("startScreen").style.display = "none";
      document.getElementById("quizScreen").style.display = "block";
      loadQuestion();
    }

    function loadQuestion() {
      if (currentQuestion >= questions.length) {
        endQuiz();
        return;
      }
      const q = questions[currentQuestion];
      document.getElementById("questionText").textContent = q.q;
      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";
      q.options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => {
          if (opt === q.answer) score++;
          currentQuestion++;
          loadQuestion();
        };
        optionsDiv.appendChild(btn);
      });
    }

    async function endQuiz() {
  document.getElementById("quizScreen").style.display = "none";
  document.getElementById("resultScreen").style.display = "block";

  const finalScoreEl = document.getElementById("finalScore");
  finalScoreEl.textContent = `ูุชูุฌุชู: ${score} ูู ${questions.length}`;
  let commentBox = document.getElementById("commentBox");

  if (score >= 0 && score <= 2) { 
    finalScoreEl.style.color = "red";
    commentBox.innerHTML = `<p style="font-size:20px;">ููููู ุงูุช ุนุงูุด ูููู </p><img src="img/4.webp" alt="๐" style="max-width:200px">`;
  } else if (score >= 3 && score <= 4) { 
    finalScoreEl.style.color = "red";
    commentBox.innerHTML = `<p style="font-size:20px;">ูุงุนู ุจูู ุญุฑุงู ุนููู ููุณู </p><img src="img/2.webp" alt="๐" style="max-width:200px">`;
  } else if (score >= 5 && score <= 6) { 
    finalScoreEl.style.color = "orange";
    commentBox.innerHTML = `<p style="font-size:20px;">ุงูุช ูุฏุง ูุงุฌุญ ุจุงูุฑุงูุฉ ูููุด ุงูู ููู</p><img src="img/3.webp" alt="๐" style="max-width:220px">`;
  } else if (score >= 7 && score <= 9) { // 7 โ 9 ุฃุฎุถุฑ
    finalScoreEl.style.color = "lightgreen";
    commentBox.innerHTML = `<p style="font-size:20px;">ูุงูุช </p><img src="img/7.webp" alt="๐" style="max-width:250px">`;
  } else if (score === 10) { // 10 ุฃุฎุถุฑ ุฏุงูู
    finalScoreEl.style.color = "green";
    commentBox.innerHTML = `<p style="font-size:20px;"> ุฃูุง ูุจุณูุท ุจูู</p><img src="img/1.webp" alt="๐" style="max-width:300px">`;
  }

  // ุญูุธ ุงููุชูุฌุฉ ูู Firebase
  await addDoc(collection(db, "scores"), {
    name: playerName,
    score: score
  });

  // ุฅุนุงุฏุฉ ุชุญููู ููุญุฉ ุงููุชุตุฏุฑูู
  loadLeaderboard("leaderboardListResult");
}


    async function loadLeaderboard(elementId = "leaderboardList") {
      const querySnapshot = await getDocs(collection(db, "scores"));
      let scores = [];
      querySnapshot.forEach(doc => scores.push(doc.data()));
      scores.sort((a, b) => b.score - a.score);

      const list = document.getElementById(elementId);
      list.innerHTML = "";
      let half = Math.floor(questions.length / 2);

      scores.forEach((s, index) => {
        const row = document.createElement("div");
        row.classList.add("player-row");
        if (s.name === playerName) row.classList.add("highlight");

        let color = "lightgreen";
        if (s.score < half) color = "red";
        else if (s.score === half) color = "orange";

        row.innerHTML = `
          <div class="rank">${index + 1}</div>
          <div class="player-info" style="color:${color}">
            <span>${s.name}</span>
            <span>${s.score}</span>
          </div>
        `;
        list.appendChild(row);
      });
    }

    loadLeaderboard();
    
  </script>
  <script>
    function toggleMenu() {
  const menu = document.getElementById("dropdownMenu");
  menu.classList.toggle("show");
}

  </script>
  </body>
</body>
</html>


